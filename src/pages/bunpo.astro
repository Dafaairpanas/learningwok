---
import Layout from "../layouts/Layout.astro";
import BunpoList from "../components/bunpo/BunpoList";
import { materiService } from "../services/materi";
import { Layers } from "lucide-react";

// Fetch bunpo data from Supabase using materiService
const bunpoData = await materiService.getBunpo();
console.log(`Loaded ${bunpoData.length} bunpo from Supabase via Service`);
---

<Layout title="Bunpo (æ–‡æ³•)">
  <section>
    <div class="border-b border-border-line bg-surface/30 p-6 md:p-16">
      <!-- Header -->
      <div class="max-w-7xl mx-auto text-center md:text-left">
        <div
          class="inline-flex items-center gap-2 border border-ink px-3 py-1 mb-6"
        >
          <span class="font-jp font-bold">æ–‡æ³•</span>
          <span class="text-xs font-bold tracking-widest uppercase"
            >Database</span
          >
        </div>

        <h1
          class="text-5xl md:text-8xl font-black tracking-tighter uppercase leading-none mb-6"
        >
          Bunpo<br />
          <span
            class="text-stroke text-transparent"
            style="-webkit-text-stroke: 2px var(--color-ink);"
          >
            Matrix
          </span>
        </h1>

        <p class="text-xl max-w-2xl leading-relaxed text-subtle">
          Master Japanese grammar and sentence patterns. Organized by JLPT level
          and type.
        </p>

        <!-- Quick Actions -->
        <div class="mt-8 flex flex-wrap gap-4 justify-center md:justify-start">
          <a
            href="/flashcards"
            class="btn-swiss bg-brand-neon text-ink border-transparent hover:bg-ink hover:text-brand-neon"
          >
            <Layers className="h-4 w-4 mr-2" />
            Flashcard Mode
          </a>
        </div>

        <!-- Info Cards (Swiss Style) -->
        <div
          class="mt-12 grid gap-px bg-border-line border border-border-line sm:grid-cols-2"
        >
          <div
            class="bg-canvas p-6 hover:bg-surface transition-colors text-left"
          >
            <h3 class="font-bold text-lg text-ink mb-2">ğŸ“– Tata Bahasa</h3>
            <p class="text-sm text-subtle">
              Partikel, bentuk kata kerja, dan aturan dasar
            </p>
          </div>
          <div
            class="bg-canvas p-6 hover:bg-surface transition-colors text-left"
          >
            <h3 class="font-bold text-lg text-ink mb-2">ğŸ“ Pola Kalimat</h3>
            <p class="text-sm text-subtle">
              Template kalimat untuk situasi sehari-hari
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="mx-auto border-b border-border-line">
      <BunpoList initialBunpo={bunpoData} client:visible />
    </div>
  </section>
</Layout>

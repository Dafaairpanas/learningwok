---
interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const navLinks = [
  { href: "/", label: "Home" },
  { href: "/kanji", label: "Kanji" },
  { href: "/kosakata", label: "Kosakata" },
  { href: "/bunpo", label: "Bunpo (æ–‡æ³•)" },
  { href: "/roadmap", label: "Roadmap" },
];

function isActive(href: string, current: string): boolean {
  if (href === "/") return current === "/";
  return current.startsWith(href);
}
import ThemeToggle from "../ThemeToggle.astro";
---

<header
  class="sticky top-0 z-50 w-full bg-canvas/90 backdrop-blur-md border-b border-border-line transition-colors duration-300"
>
  <div
    class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8"
  >
    <!-- Logo -->
    <a href="/" class="flex items-center gap-2 group">
      <span class="text-2xl group-hover:scale-110 transition-transform">ðŸŽŒ</span
      >
      <span class="font-display font-bold text-xl tracking-tighter text-ink">
        NIHONGO<span class="text-brand-orange">IN</span>
      </span>
    </a>

    <nav class="hidden md:flex items-center gap-1">
      {
        navLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              "px-4 py-1.5 text-sm font-bold uppercase tracking-wide transition-colors",
              isActive(link.href, currentPath)
                ? "bg-inv-canvas text-inv-ink border border-transparent"
                : "text-subtle hover:bg-inv-canvas hover:text-inv-ink border border-transparent",
            ]}
          >
            {link.label}
          </a>
        ))
      }
    </nav>

    <!-- Right Section -->
    <div class="flex items-center gap-4">
      <ThemeToggle />

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="flex h-10 w-10 items-center justify-center border border-border-line bg-canvas text-ink md:hidden hover:bg-surface transition-colors"
        aria-label="Open menu"
      >
        <svg
          class="h-5 w-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="square"
            stroke-linejoin="miter"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav
    id="mobile-menu"
    class="hidden border-b border-border-line bg-canvas px-4 py-4 md:hidden"
  >
    <div class="flex flex-col gap-2">
      {
        navLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              "px-4 py-3 text-sm font-bold uppercase tracking-wide transition-colors",
              isActive(link.href, currentPath)
                ? "bg-inv-canvas text-inv-ink"
                : "text-subtle hover:bg-inv-canvas hover:text-inv-ink",
            ]}
          >
            {link.label}
          </a>
        ))
      }
    </div>
  </nav>
</header>

<script>
  const menuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");

  menuBtn?.addEventListener("click", () => {
    mobileMenu?.classList.toggle("hidden");
  });
</script>
